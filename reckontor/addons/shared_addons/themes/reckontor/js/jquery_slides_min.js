/*
* Slides, A Slideshow Plugin for jQuery
* Intructions: http://slidesjs.com
* By: Nathan Searles, http://nathansearles.com
* Version: 1.1.9
* Updated: September 5th, 2011
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
* Script has been modified for Viator use.
*/
(function(e){e.fn.slides=function(t){var n={};this.prependTo=function(e,t,r){n.insert(e,t,r,true)};this.appendTo=function(e,t,r){n.insert(e,t,r,false)};return t=e.extend({},e.fn.slides.option,t),this.each(function(){function r(n,r,i){if(!E&&w){E=!0,t.animationStart(y+1);switch(n){case"next":m=y,v=y+1,v=f===v?0:v,x=l*2,n=-l*2,y=v;break;case"prev":m=y,v=y-1,v=v===-1?f-1:v,x=0,n=0,y=v;break;case"slidesPagination":v=parseInt(i,10),m=e("."+t.slidesPaginationClass+" li."+t.currentClass+" a",o).attr("href").match("[^#/]+$"),v>m?(x=l*2,n=-l*2):(x=0,n=0),y=v}r==="fade"?t.crossfade?u.children(":eq("+v+")",o).css({zIndex:10}).fadeIn(t.fadeSpeed,t.fadeEasing,function(){t.autoHeight?u.animate({height:u.children(":eq("+v+")",o).outerHeight()},t.autoHeightSpeed,function(){u.children(":eq("+m+")",o).css({display:"none",zIndex:0}),u.children(":eq("+v+")",o).css({zIndex:0}),t.animationComplete(v+1),E=!1}):(u.children(":eq("+m+")",o).css({display:"none",zIndex:0}),u.children(":eq("+v+")",o).css({zIndex:0}),t.animationComplete(v+1),E=!1)}):u.children(":eq("+m+")",o).fadeOut(t.fadeSpeed,t.fadeEasing,function(){t.autoHeight?u.animate({height:u.children(":eq("+v+")",o).outerHeight()},t.autoHeightSpeed,function(){u.children(":eq("+v+")",o).fadeIn(t.fadeSpeed,t.fadeEasing)}):u.children(":eq("+v+")",o).fadeIn(t.fadeSpeed,t.fadeEasing,function(){e.browser.msie&&e(this).get(0).style.removeAttribute("filter")}),t.animationComplete(v+1),E=!1}):(u.children(":eq("+v+")").css({left:x,display:"block"}),t.autoHeight?u.animate({left:n,height:u.children(":eq("+v+")").outerHeight()},t.slideSpeed,t.slideEasing,function(){u.css({left:-l}),u.children(":eq("+v+")").css({left:l,zIndex:5}),u.children(":eq("+m+")").css({left:l,display:"none",zIndex:0}),t.animationComplete(v+1),E=!1}):u.animate({left:n},t.slideSpeed,t.slideEasing,function(){u.css({left:-l}),u.children(":eq("+v+")").css({left:l,zIndex:5}),u.children(":eq("+m+")").css({left:l,display:"none",zIndex:0}),t.animationComplete(v+1),E=!1})),t.slidesPagination&&(e("."+t.slidesPaginationClass+" li."+t.currentClass,o).removeClass(t.currentClass),e("."+t.slidesPaginationClass+" li:eq("+v+")",o).addClass(t.currentClass))}}function i(){clearInterval(o.data("interval"))}function s(){t.pause?(clearTimeout(o.data("pause")),clearInterval(o.data("interval")),C=setTimeout(function(){clearTimeout(o.data("pause")),k=setInterval(function(){r("next",p)},t.play),o.data("interval",k)},t.pause),o.data("pause",C)):i()}n={pause:function(){i()},resume:function(e){f=u.children().size();y=e;s()},paginate:function(n){var r=$("."+t.slidesPaginationClass),i=r.children().size(),s=e('<li><a href="#'+i+'">'+(i+1)+"</a></li>");r.append(s);r.find("li:nth-child("+n+")").addClass("current").siblings().removeClass("current")},insert:function(t,r,i,s){i=e.extend({},{wait:0},i);n.pause();setTimeout(function(){var o=e(".slidesControl"),u=e(t),f=u[0].tagName;o.find(f).css({"z-index":0,display:"none"});if(r==undefined){r=1}else{r++}var l=o.find(f+":nth-child("+r+")");u.css({position:"absolute",top:0,left:o.children().outerWidth(),"z-index":5,display:"block"});var c=r;if(s){l.before(u);n.paginate(r-1);c--}else{l.after(u);n.paginate(r+1)}setTimeout(function(){n.resume(c)},i.wait)},0)}};e("."+t.container,e(this)).children().wrapAll('<div class="slidesControl"/>');var o=e(this),u=e(".slidesControl",o),f=u.children().size(),l=u.children().outerWidth(),c=u.children().outerHeight(),h=t.start-1,p=t.effect.indexOf(",")<0?t.effect:t.effect.replace(" ","").split(",")[0],d=t.effect.indexOf(",")<0?p:t.effect.replace(" ","").split(",")[1],v=0,m=0,g=0,y=0,w,E,S,x,T,N,C,k;if(f<2)return e("."+t.container,e(this)).fadeIn(t.fadeSpeed,t.fadeEasing,function(){w=!0,t.slidesLoaded()}),e("."+t.next+", ."+t.prev).fadeOut(0),!1;if(f<2)return;h<0&&(h=0),h>f&&(h=f-1),t.start&&(y=h),t.randomize&&u.randomize(),e("."+t.container,o).css({overflow:"hidden",position:"relative"}),u.children().css({position:"absolute",top:0,left:u.children().outerWidth(),zIndex:0,display:"none"}),u.css({position:"relative",width:l*3,height:c,left:-l}),e("."+t.container,o).css({display:"block"}),t.autoHeight&&(u.children().css({height:"auto"}),u.animate({height:u.children(":eq("+h+")").outerHeight()},t.autoHeightSpeed));if(t.preload&&u.find("img:eq("+h+")").length){e("."+t.container,o).css({background:"url("+t.preloadImage+") no-repeat 50% 50%"});var L=u.find("img:eq("+h+")").attr("src")+"?"+(new Date).getTime();e("img",o).parent().attr("class")!="slidesControl"?N=u.children(":eq(0)")[0].tagName.toLowerCase():N=u.find("img:eq("+h+")"),u.find("img:eq("+h+")").attr("src",L).load(function(){u.find(N+":eq("+h+")").fadeIn(t.fadeSpeed,t.fadeEasing,function(){e(this).css({zIndex:5}),e("."+t.container,o).css({background:""}),w=!0,t.slidesLoaded()})})}else u.children(":eq("+h+")").fadeIn(t.fadeSpeed,t.fadeEasing,function(){w=!0,t.slidesLoaded()});t.bigTarget&&(u.children().css({cursor:"pointer"}),u.children().click(function(){return r("next",p),!1})),t.hoverPause&&t.play&&(u.bind("mouseover",function(){i()}),u.bind("mouseleave",function(){s()})),t.generateNextPrev&&(e("."+t.container,o).after('<a href="#" class="'+t.prev+'">Prev</a>'),e("."+t.prev,o).after('<a href="#" class="'+t.next+'">Next</a>')),e("."+t.next,o).click(function(e){e.preventDefault(),t.play&&s(),r("next",p)}),e("."+t.prev,o).click(function(e){e.preventDefault(),t.play&&s(),r("prev",p)}),t.generatePagination?(t.prependPagination?o.prepend("<ul class="+t.slidesPaginationClass+"></ul>"):o.append("<ul class="+t.slidesPaginationClass+"></ul>"),u.children().each(function(){e("."+t.slidesPaginationClass,o).append('<li><a href="#'+g+'">'+(g+1)+"</a></li>"),g++})):e("."+t.slidesPaginationClass+" li a",o).each(function(){e(this).attr("href","#"+g),g++}),e("."+t.slidesPaginationClass+" li:eq("+h+")",o).addClass(t.currentClass),e("."+t.slidesPaginationClass+" li a",o).live("click",function(){if(t.play){s()}S=$(this).attr("href").match("[^#/]+$");if(y!=S){r("slidesPagination",d,S)}return false}),e("a.link",o).click(function(){return t.play&&s(),S=e(this).attr("href").match("[^#/]+$")-1,y!=S&&r("slidesPagination",d,S),!1}),t.play&&(k=setInterval(function(){r("next",p)},t.play),o.data("interval",k))})},e.fn.slides.option={preload:!1,preloadImage:"",container:"slidesContainer",generateNextPrev:!1,next:"next",prev:"prev",slidesPagination:!0,generatePagination:!0,prependPagination:!1,slidesPaginationClass:"slidesPagination",currentClass:"current",fadeSpeed:600,fadeEasing:"",slideSpeed:800,slideEasing:"",start:1,effect:"slide",crossfade:!1,randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}},e.fn.randomize=function(t){function n(){return Math.round(Math.random())-.5}return e(this).each(function(){var r=e(this),s=r.children(),o=s.length;if(o>1){s.hide();var u=[];for(i=0;i<o;i++)u[u.length]=i;u=u.sort(n),e.each(u,function(e,n){var i=s.eq(n),o=i.clone(!0);o.show().appendTo(r),t!==undefined&&t(i,o),i.remove()})}})}})(jQuery)
